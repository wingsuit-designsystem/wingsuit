{#
/**
 * @file
 * Grid component
 *
 * See component.wingsuit.yml for usage.
 */
#}

{% set columns = columns|default(2) %}
{% set columns_width = columns_width|default('equal') %}

{% set gutter = gutter|default('default') %}

{% set gutter_cell_classes = pattern_configuration('grid', '', 'gutter')[gutter]['cell'] %}
{% set gutter_container_classes = pattern_configuration('grid', '', 'gutter')[gutter]['container'] %}

{% set configuration = pattern_configuration('grid', '', 'columns')[columns][columns_width] %}

{% if configuration is not empty %}

  <div {{ attributes|default(create_attribute()).addClass(
    [
      gutter_container_classes,
      'flex flex-wrap'
    ] | sort | join(' ') | trim) }}>
    {% block cells %}
      {% for i, cell in cells %}
        {% set column_i = (i % columns) + 1 %}
        {% set column_classes = configuration[column_i] is not empty ? configuration[column_i] : configuration['default'] %}
        {% set column_attributes = create_attribute().
          addClass(
          [
            'flex flex-col',
            column_classes,
            gutter_cell_classes
          ] | sort | join(' ') | trim) %}
        <div {{ column_attributes }}>
          {% block cell %}
            {{ cell }}
          {% endblock %}
        </div>
      {%- endfor -%}
    {% endblock %}
  </div>
{% else %}
  No configuration found for "{{ columns }}/{{ config }}".
{% endif %}
