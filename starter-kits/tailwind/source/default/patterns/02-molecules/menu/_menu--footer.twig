{% set menu_level = 0 %}

{% import _self as menus %}

{% macro menu(items, menu_level) %}
  {% import _self as menus %}

  {% set link_classes = ([
    'text-green-700 pb-2 dark:text-white',
    menu_level == 1 ? 'text-green-700 w-full',
  ] | sort | join(' ') | trim ) %}
    <div>
      {% set row_numbers = items|length/2 %}
      {% for row in items|batch(menu_level == 2 ? row_numbers : 100) %}
        <ul>
          {% for item in row %}
            <li>
              <div class="{{ link_classes }}">
                <a href="{{ item.url }}" class="flex-1">
                  {{ item.title }}
                </a>
              </div>
              {% if item.below %}
                {{ menus.menu(item.below, menu_level + 1) }}
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% endfor %}
    </div>
{% endmacro %}

{% set list_classes = ([
  'lg:flex justify-between'
] | sort | join(' ') | trim ) %}

<ul class="{{ list_classes }}">
  {% for item in items %}
    {% set title_classes = ([
      'flex flex-col justify-center text-green-700 text-lg font-bold dark:text-white pb-2 w-full '
    ] | sort | join(' ') | trim ) %}
    <li data-menu-target="submenu" data-menu-level="{{ menu_level }}"  class="flex-1">
      <div class="flex flex-col justify-center pt-4 lg:pt-0">
        <div class="{{ title_classes }}">
          <div>
            {{ item.title }}
          </div>
        </div>
      </div>
      {% if item.below %}
        {{ menus.menu(item.below, menu_level + 1) }}
      {% endif %}
    </li>
  {% endfor %}
</ul>



